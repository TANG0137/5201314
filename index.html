<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å’Œæˆ‘ä¸€èµ·èµ°åˆ°æœ€åå§</title>

<style>
*{box-sizing:border-box;}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
  color:#fff;
  background:
    radial-gradient(circle at top, rgba(255,255,255,.15), transparent 60%),
    linear-gradient(160deg,#1b1f3b,#0b0d1a);
}
#app{
  width:100%;
  max-width:380px;
  padding:24px;
  text-align:center;
}
button{
  margin-top:28px;
  padding:12px 32px;
  font-size:20px;
  background:none;
  border:1px solid rgba(255,255,255,.6);
  color:#fff;
}
.stage{
  margin-top:30px;
  min-height:300px;
  position:relative;
}

/* ---------- ç¼“æ…¢æµ®ç°åŠ¨ç”» ---------- */
.fade-in{
  opacity:0;
  animation:fadeIn 1.2s ease forwards;
}
.fade-delay-1{animation-delay:.3s;}
.fade-delay-2{animation-delay:.6s;}
.fade-delay-3{animation-delay:.9s;}

@keyframes fadeIn{
  from{
    opacity:0;
    transform:translateY(12px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}

/* ---------- ç¬¬äºŒå…³ ---------- */
#puzzleArea{position:relative;height:260px;}
#target{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:140px;
}
#piece{
  position:absolute;
  left:500px;
  bottom:250px;
  width:120px;
  cursor:grab;
  touch-action:none;
}
#piece svg{width:100%;pointer-events:none;}

/* ---------- ç¬¬ä¸‰å…³ ---------- */
.person{
  position:absolute;
  cursor:pointer;
  user-select:none;
}

/* ---------- ç¬¬å››å…³ ---------- */
#book{
  border:4px solid rgba(255,255,255,.5);
  padding:18px;
  min-height:500px;
  font-size:20px;
  max-width:950px;
  margin:0 auto;
  text-align: left; 
}

/* ---------- ç¬¬äº”å…³ ---------- */
#gift{
  font-size:150px;
  transition:transform .1s;
  user-select:none;
}
</style>
</head>

<body>

<audio id="bgm" src="123.mp3" loop></audio>

<div id="app"></div>

<script>
const app = document.getElementById("app");
const bgm = document.getElementById("bgm");

const PASSWORD = "20250501";

function passwordGate(){
  app.innerHTML = `
    <p class="fade-in" style="font-size:28px">
      è¾“å…¥æš—å·<br>
      æ‰èƒ½è§£é”ğŸ<br>
      ã€åˆæ¬¡çš„æˆ‘ä»¬ã€‘
    </p>
    <input id="pwd" type="password"
      class="fade-in fade-delay-1"
      style="font-size:22px;padding:10px;width:80%;text-align:center;">
    <br>
    <button class="fade-in fade-delay-2" onclick="checkPassword()">è§£é”</button>
  `;
}

function checkPassword(){
  const val = document.getElementById("pwd").value;
  if(val === PASSWORD){
    bgm.volume = 0.5;
    bgm.play().catch(()=>{});
    stage1();
  }else{
    alert("å‚»å­è¿è¿™éƒ½ä¸çŸ¥é“ï¼Œè®°å¾—æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å—?<br>202xxxxx");
  }
}

function stage1(){
  app.innerHTML = `
    <p class="fade-in" style="font-size:28px">
      é€‚<br>
      ä¸çŸ¥ä¸è§‰å·²ç»åŠå¹´äº†ï¼Œ<br>
      æˆ‘ä»¬èµ°å¾—ä¸ç¨³ï¼Œ<br>
      ä½†èµ°å¾—å¾ˆè®¤çœŸã€‚<br>
      æœ‰è¿‡æ…Œä¹±ï¼Œæœ‰è¿‡å¤±æªï¼Œ<br>
      çˆ±ä½ éƒ½æ˜¾å¾—ç¬¨æ‹™ã€‚<br>
      ä½†ä½ å§‹ç»ˆåœ¨æˆ‘èº«è¾¹ã€‚<br>
      é€‚<br>
      è°¢è°¢ä½ è¿™æ®µæ—¶é—´é™ªç€æˆ‘<br>
      ä»¥åçš„è·¯<br>
      åˆ«æ”¾å¼€æˆ‘<br>
      è®©æˆ‘ç‰µç€ä½ ï¼Œä¸€èµ·èµ°<br>
      å¥½å—
    </p>
    <button class="fade-in fade-delay-2" onclick="stage2()">å¥½</button>
  `;
}

function stage2(){
  app.innerHTML = `
    <div class="stage fade-in">
      <div id="puzzleArea" class="fade-in">
        <svg id="target" viewBox="0 0 100 90">
          <path d="M50 85 C10 60,0 35,25 20
                   C40 10,50 25,50 25
                   C50 25,60 10,75 20
                   C100 35,90 60,50 85"
                fill="none" stroke="white"
                stroke-width="3" stroke-dasharray="6,6"/>
        </svg>
        <div id="piece">
          <svg viewBox="0 0 100 90">
            <path d="M50 85 C10 60,0 35,25 20
                     C40 10,50 25,50 25
                     C50 25,60 10,75 20
                     C100 35,90 60,50 85"
                  fill="crimson"/>
          </svg>
        </div>
      </div>
      <p class="fade-in fade-delay-2" style="font-size:24px">
        å”¯ä¸€å±äºä½ çš„ä½ç½®
      </p>
    </div>
  `;

  const piece = document.getElementById("piece");
  let dragging=false, sx=0, sy=0;

  piece.onpointerdown = e=>{
    dragging=true;
    sx=e.clientX-piece.offsetLeft;
    sy=e.clientY-piece.offsetTop;
    piece.setPointerCapture(e.pointerId);
  };
  piece.onpointermove = e=>{
    if(!dragging) return;
    piece.style.left=(e.clientX-sx)+"px";
    piece.style.top =(e.clientY-sy)+"px";
  };
  piece.onpointerup = ()=>{
    dragging=false;
    const rect=piece.getBoundingClientRect();
    if(Math.abs(rect.left+60-window.innerWidth/2)<40 &&
       Math.abs(rect.top+60-window.innerHeight/2)<40){
      app.innerHTML=`
        <p class="fade-in" style="font-size:28px">
          ä½ æ˜¯æˆ‘å¿ƒé‡Œ<br>
          æœ€é‡è¦çš„ä¸€ç‰‡æ‹¼å›¾<br>
          æ²¡æœ‰ä½ <br>
          æˆ‘å°†ä¸å†æ˜¯æˆ‘
        </p>
        <button class="fade-in fade-delay-2" onclick="stage3()">ç»§ç»­</button>
      `;
    }
  };
}

function stage3(){
  app.innerHTML=`
    <div class="stage fade-in" id="people" style="height:400px;"></div>
    <p class="fade-in fade-delay-2" style="font-size:24px">
      <br><br>ç»å†è¿‡æ‰å¦‚æ­¤å¥¢æœ›
    </p>
  `;
  const box=document.getElementById("people");
  let people=[];
  const cx=box.clientWidth/2, cy=150;

  for(let i=0;i<20;i++){
    const p=document.createElement("div");
    const size=90;
    p.className="person fade-in";
    p.textContent="ğŸ§";
    p.style.fontSize=size+"px";
    p.style.left=(cx+Math.random()*300-150-size/2)+"px";
    p.style.top =(cy+Math.random()*300-100-size/2)+"px";
    p.onclick=()=>{
      p.remove();
      people=people.filter(x=>x!==p);
      if(people.length===2){
        app.innerHTML=`
          <p class="fade-in" style="font-size:25px">
           é‚£äº›åªå±äºæˆ‘ä»¬ä¸¤ä¸ªäººçš„æ—¶åˆ»<br>å¯¹æˆ‘æ¥è¯´æ˜¯æœ€å¹¸ç¦çš„ç¬é—´ã€‚
          </p>
          <button class="fade-in fade-delay-2" onclick="stage4()">ç»§ç»­</button>
        `;
      }
    };
    people.push(p);
    box.appendChild(p);
  }
}

function stage4(){
  let page = 0;
  const pages = [
    "<br><br>ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œæˆ‘è¢«ä½ çš„å£°éŸ³å¸å¼•ä½äº†ğŸµã€‚<br><br>ä¸€å¼€å§‹åªæ˜¯è§‰å¾—å¥½å¬ï¼Œåæ¥å´å‘ç°ï¼Œåªè¦ä½ ä¸€å¼€å£ï¼Œæˆ‘çš„æ³¨æ„åŠ›å°±å†ä¹Ÿç¦»ä¸å¼€äº†ã€‚<br><br>é‚£å£°éŸ³åƒä¸€æ¡çœ‹ä¸è§çš„çº¿ï¼Œåœ¨æˆ‘è¿˜æ²¡å¯Ÿè§‰çš„æ—¶å€™ï¼Œå·²ç»è½»è½»ç³»åœ¨å¿ƒä¸Šâ¤ï¸ã€‚<br><br>æˆ‘å¼€å§‹æœŸå¾…ä½ çš„å‡ºç°ï¼ŒæœŸå¾…ä½ è¯´è¯çš„ç¬é—´ï¼Œå“ªæ€•åªæ˜¯ç®€å•çš„å‡ å¥è¯ï¼Œéƒ½èƒ½è®©æˆ‘å¿ƒé‡Œå®‰é™ä¸‹æ¥ã€‚",
    "çœ‹è§ä½ å’Œåˆ«äººè°ˆæƒ…è¯´çˆ±çš„æ ·å­ï¼Œä½ ä½å£°è¯´è¯ï¼Œè¯­æ°”æ¸©æŸ”ï¼Œé‚£äº›æˆ‘å¥¢æœ›çš„æ¨¡æ ·è½åœ¨åˆ«äººèº«ä¸Šã€‚<br><br>æˆ‘å’Œä½ åƒéš”ç€ä¸€å±‚ä¸–ç•Œã€‚<br><br>çœ‹è§ä½ å’Œåˆ«äººç›¸å¤„çš„ç”»é¢ï¼Œæˆ‘æ‰æ…¢æ…¢å‘ç°ï¼ŒåŸæ¥æˆ‘çš„å¿ƒï¼Œæ¯”æˆ‘æƒ³è±¡ä¸­è¿˜è¦è„†å¼±ã€‚<br><br>ä¸æ˜¯å«‰å¦’å¤±æ§ï¼Œä¹Ÿä¸æ˜¯æƒ³è¦äº‰ä»€ä¹ˆã€‚<br><br>åªæ˜¯é‚£ä¸€ç¬é—´ï¼Œæ‰€æœ‰å‹‰å¼ºç»´æŒçš„å†·é™ï¼Œæ‰€æœ‰å¯¹è‡ªå·±è¯´çš„â€œæ²¡äº‹â€ï¼Œéƒ½æ˜¯åœ¨è‡ªæ¬ºæ¬ºäººã€‚<br>æ²¡æœ‰å´©å¡Œï¼Œæˆ‘åªæ˜¯æ¸æ¸åœ°æ˜ç™½ï¼Œæˆ‘æ¯”æƒ³åƒçš„ï¼Œæ›´åœ¨ä¹ä½ ã€‚",
    "<br><br><br><br><br>ä¸çŸ¥ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œæˆ‘å˜å¾—é‚£ä¹ˆæƒ³è¦ä½ ã€‚<br><br>é€æ¸å˜å¾—å¤±æ§ï¼Œç”šè‡³ä¸åƒè‡ªå·±ã€‚<br><br>ç›´åˆ°ä¸€æ¬¡æ¬¡äº‰åµï¼Œä¸€æ¬¡æ¬¡ä»¥ä¸ºçœŸçš„è¦èµ°æ•£ï¼Œæˆ‘æ‰çŸ¥é“<br><br>ä½ æ—©å°±æˆäº†æˆ‘ï¼Œæ— æ³•å¤±å»çš„äººã€‚",
    " ",
    "<br><br><br><br><br><br><br><br>å¾€åçš„æ•…äº‹ï¼Œæˆ‘ä»¬ä¸€èµ·ä¹¦å†™<br>å¥½å—?"
  ];

  app.innerHTML = `
    <div id="book" class="fade-in" style="text-align:left;">${pages[0]}</div>
    <button id="next" class="fade-in fade-delay-2">ç¿»é¡µ</button>
  `;

  document.getElementById("next").onclick = () => {
    page++;
    if(page < pages.length){
      const book = document.getElementById("book");
      book.classList.remove("fade-in");
      void book.offsetWidth; // è§¸ç™¼é‡ç¹ªå‹•ç•«
      book.innerHTML = pages[page];

      // æœ€å¾Œä¸€é ç½®ä¸­ï¼Œå…¶ä»–é é å·¦
      if(page === pages.length - 1){
        book.style.textAlign = "center";
      } else {
        book.style.textAlign = "left";
      }

      book.classList.add("fade-in");
    } else {
      stage5();
    }
  };
}
function stage5(){
  app.innerHTML=`
    <div class="stage" id="stage5" style="
         background-color:#1b1f3b;
         height:100vh;
         display:flex;
         flex-direction:column;
         justify-content:center;
         align-items:center;
    ">
      <div id="gift">ğŸ</div>
      <p class="fade-in" style="font-size:24px;color:white;margin-top:20px;"><br><br><br>æ’¸ä»– èµ¶ç´§çš„</p>
    </div>
  `;

  const gift = document.getElementById("gift");
  const stage = document.getElementById("stage5");
  let startY = null, moves = 0, scale = 1, acc = 0;
  const threshold = 10;

  function startMove(e){
    startY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
    e.preventDefault();
  }

  function onMove(e){
    if(startY===null) return;
    const y = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
    acc += Math.abs(y - startY);
    startY = y;
    while(acc>=threshold){
      moves++;
      scale += 0.002;
      acc -= threshold;
    }
    gift.style.transform = `scale(${scale})`;

       if(moves>=700){
      // èƒŒæ™¯æ›æˆå®Œæ•´åœ–ç‰‡
      stage.style.backgroundImage = "url('https://raw.githubusercontent.com/TANG0137/123456/main/0W7A6904.JPG')";
      stage.style.backgroundSize = "contain";      // ä¿æŒåœ–ç‰‡å®Œæ•´
      stage.style.backgroundPosition = "center 70%";   // å±…ä¸­
      stage.style.backgroundRepeat = "no-repeat";  // ä¸é‡è¤‡


      gift.style.transition = "all 0.5s ease";
      gift.style.transform = "scale(3) rotate(720deg)";
      gift.style.opacity = 0;

      stage.innerHTML = `
        <div style="position:relative; width:100%; height:100%;">
          <h1 class="fade-in" style="
              color:white; 
              text-align:center; 
              font-size:19px; 
              position:absolute; 
              top:40px;
              width:100%;
          ">å“¥ä»Šå¤©æ˜¯æˆ‘ä»¬ä¸€èµ·è¿‡çš„ç¬¬ä¸€ä¸ªåœ£è¯èŠ‚ã€‚<br><br>æˆ‘æƒ³è¿‡ï¼Œè¿™äº›è¯ç•™åˆ°è·¨å¹´ä¼šä¸ä¼šæ›´å¥½ã€‚<br>ä½†æƒ³äº†ä¼šå°±æ”¾å¼ƒäº†ï¼Œæˆ‘çŸ¥é“ï¼Œèƒ½é™ªä½ è·¨å¹´çš„äººï¼Œå¤§æ¦‚ä¸ä¼šæ˜¯æˆ‘ã€‚æ‰€ä»¥æˆ‘æƒ³ï¼Œåœ¨ä»Šå¤©è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­ï¼Œæ›¿æˆ‘ä»¬åˆ’ä¸‹ä¸€ä¸ªå¥ç‚¹ï¼Œå°±å½“ä½œæ˜¯æˆ‘ä»¬çš„è·¨å¹´äº†ã€‚ ğŸ˜å…¶å®ï¼Œæˆ‘ä»æ¥æ²¡æœ‰å’Œäººå•ç‹¬è¿‡åœ£è¯èŠ‚çš„æ—¶åˆ»ã€‚ä½†ä»Šå¹´ä¸ä¸€æ ·ã€‚å› ä¸ºæœ‰ä½ åœ¨ï¼Œè¿™ä¸ªèŠ‚æ—¥ï¼Œç¬¬ä¸€æ¬¡æœ‰äº†æ„ä¹‰ã€‚ âœŒï¸æ„¿æˆ‘ä»¬çš„æ¯ä¸€ä¸ªåœ£è¯èŠ‚ã€æ¯ä¸€å¤©éƒ½åƒä»Šå¤©ä¸€æ ·ã€‚<br>æœ‰çˆ±ã€æœ‰ç¬‘ã€æœ‰ä½ ã€‚<br>é©¬é€‚ï¼Œåœ£è¯èŠ‚å¿«ä¹ã€‚æˆ‘çˆ±ä½ ã€‚ ğŸ„
          </h1>
        </div>
      `;

      gift.removeEventListener('mousedown', startMove);
      gift.removeEventListener('mousemove', onMove);
      gift.removeEventListener('mouseup', endMove);
      gift.removeEventListener('mouseleave', endMove);
      gift.removeEventListener('touchstart', startMove);
      gift.removeEventListener('touchmove', onMove);
      gift.removeEventListener('touchend', endMove);
    }
  }

  function endMove(){
    startY = null;
  }

  gift.addEventListener('mousedown', startMove);
  gift.addEventListener('mousemove', onMove);
  gift.addEventListener('mouseup', endMove);
  gift.addEventListener('mouseleave', endMove);

  gift.addEventListener('touchstart', startMove);
  gift.addEventListener('touchmove', onMove);
  gift.addEventListener('touchend', endMove);
}

/* ========= å¯åŠ¨ ========= */
passwordGate();
</script>
</body>
</html>

